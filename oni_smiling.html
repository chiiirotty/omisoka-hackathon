<html>
<head>
  <meta charset="UTF-8" />
  <title>Web Speech API</title>
<script src="https://unpkg.com/obniz@3.3.0/obniz.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
window.SpeechRecognition = window.SpeechRecognition || webkitSpeechRecognition;
var recognition = new webkitSpeechRecognition();
recognition.lang = 'ja';

// éŒ²éŸ³çµ‚äº†æ™‚ãƒˆãƒªã‚¬ãƒ¼
recognition.addEventListener('result', function(event){
    var obniz = new Obniz("OBNIZ_ID_HERE");
    var text = event.results.item(0).item(0).transcript;
    if(text.includes('æ¥å¹´') || text.includes('2024å¹´') || text.includes('ä»¤å’Œå…­å¹´') || text.includes('ä»¤å’Œ6å¹´')) {
        text = text + 'ã¨ã‹ã†ã‘ã‚‹'
        obniz.onconnect = async function () {
            var servo = obniz.wired("ServoMotor", {gnd:0, vcc:1, signal:2});
            servo.angle(90);
            await obniz.wait(1000);
            servo.angle(180);
            await obniz.wait(2000);
            servo.angle(90);
        };
    } else {
        text = 'ãµãƒ¼ã‚“';
    }
    $("#result_text").val(text);
}, false);

// éŒ²éŸ³é–‹å§‹
function record()
{
    recognition.start();
}
</script>
</head>

<body>
<h2>é¬¼ã‚’ç¬‘ã‚ã›ã‚ğŸ‘¹</h2>
<textarea id="result_text" cols="100" rows="10">
</textarea>
<br />
<input type="button" onClick="record()" value="æŠ±è² ã‚’ã©ã†ã" />
</body>
</html>
